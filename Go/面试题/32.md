# 1. 32

## 1.1. 问题

### 1.1.1. 下面选项正确的是？

A. 类型可以声明的函数体内；
B. Go 语言支持 ++i 或者 –i 操作；
C. nil 是关键字；
D. 匿名函数可以直接赋值给一个变量或者直接执行；

### 1.1.2. 下面的代码输出什么？

```go
func F(n int) func() int {
    return func() int {
        n++
        return n
    }
}

func main() {
    f := F(5)
    defer func() {
        fmt.Println(f())
    }()
    defer fmt.Println(f())
    i := f()
    fmt.Println(i)
}
```



## 1.2. 答案

### 1.2.1. 答案1

参考答案及解析：AD。

### 1.2.2. 答案2

参考答案及解析：768。

知识点：匿名函数、defer()。

**`defer() 后面的函数如果带参数，会优先计算参数，并将结果存储在栈中，到真正执行 defer() 的时候取出`。**

所以在上述代码中，

* 第二个 defer 语句中的 f() 作为打印语句的参数在入栈时就会先执行，此时值为 6
* `i:=f()` 时，得到的值为 7
* 第一个 defer 最后执行，其后的匿名函数没有参数，所以入栈时不会执行 f()。当程序即将结束而调用时，f() 的参数已经变成了 7 ，所以最终得到的值为 8

另外，需要注意：f 是一个函数类型的变量，要执行其函数体，末尾必须带上小括号——即 `f()`
